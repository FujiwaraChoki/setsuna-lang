---
title: Math Functions
description: Mathematical operations in Setsuna
---

# Math Functions

Setsuna provides built-in mathematical functions for common operations.

## Arithmetic Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `+` | Addition | `5 + 3` → `8` |
| `-` | Subtraction | `5 - 3` → `2` |
| `*` | Multiplication | `5 * 3` → `15` |
| `/` | Division | `10 / 3` → `3.333...` |
| `%` | Modulo | `10 % 3` → `1` |

### Integer vs Float Division

```setsuna
10 / 3      // 3.333... (always float division)
10 % 3      // 1 (integer remainder)
```

### Unary Minus

```setsuna
let x = 5
let y = -x   // -5
let z = -(-x) // 5
```

## Mathematical Constants

Setsuna provides built-in mathematical constants:

```setsuna
pi    // 3.141592653589793
e     // 2.718281828459045
```

Use these for trigonometric and exponential calculations.

## Basic Math Functions

### abs

Returns the absolute value.

```setsuna
abs(-5)      // 5
abs(5)       // 5
abs(-3.14)   // 3.14
abs(0)       // 0
```

### sqrt

Returns the square root.

```setsuna
sqrt(16)     // 4.0
sqrt(2)      // 1.4142135623730951
sqrt(0)      // 0.0
```

<Warning>
`sqrt` of a negative number returns `NaN`.
</Warning>

### pow

Returns base raised to the power of exponent.

```setsuna
pow(2, 3)    // 8 (2³)
pow(2, 10)   // 1024
pow(2, 0)    // 1
pow(2, -1)   // 0.5
pow(4, 0.5)  // 2.0 (square root)
pow(27, 1/3) // 3.0 (cube root)
```

### min

Returns the smaller of two values.

```setsuna
min(3, 5)        // 3
min(-1, 1)       // -1
min(3.14, 2.71)  // 2.71
min(0, 0)        // 0
```

### max

Returns the larger of two values.

```setsuna
max(3, 5)        // 5
max(-1, 1)       // 1
max(3.14, 2.71)  // 3.14
max(0, 0)        // 0
```

### floor

Rounds down to the nearest integer.

```setsuna
floor(3.7)     // 3
floor(3.2)     // 3
floor(-3.2)    // -4
floor(-3.7)    // -4
floor(5.0)     // 5
```

### ceil

Rounds up to the nearest integer.

```setsuna
ceil(3.2)      // 4
ceil(3.7)      // 4
ceil(-3.2)     // -3
ceil(-3.7)     // -3
ceil(5.0)      // 5
```

### round

Rounds to the nearest integer.

```setsuna
round(3.4)     // 3
round(3.5)     // 4
round(3.6)     // 4
round(-3.5)    // -4
```

## Trigonometric Functions

Setsuna provides standard trigonometric functions. All angles are in radians.

### sin

Returns the sine of an angle.

```setsuna
sin(0)         // 0.0
sin(pi / 2)    // 1.0
sin(pi)        // 0.0 (approximately)
```

### cos

Returns the cosine of an angle.

```setsuna
cos(0)         // 1.0
cos(pi / 2)    // 0.0 (approximately)
cos(pi)        // -1.0
```

### tan

Returns the tangent of an angle.

```setsuna
tan(0)         // 0.0
tan(pi / 4)    // 1.0
```

### asin

Returns the arcsine (inverse sine) in radians.

```setsuna
asin(0)        // 0.0
asin(1)        // 1.5707... (pi/2)
```

### acos

Returns the arccosine (inverse cosine) in radians.

```setsuna
acos(1)        // 0.0
acos(0)        // 1.5707... (pi/2)
```

### atan

Returns the arctangent (inverse tangent) in radians.

```setsuna
atan(0)        // 0.0
atan(1)        // 0.7853... (pi/4)
```

### atan2

Returns the arctangent of y/x, using the signs of both arguments to determine the quadrant.

```setsuna
atan2(1, 1)    // 0.7853... (pi/4)
atan2(1, 0)    // 1.5707... (pi/2)
atan2(-1, -1)  // -2.356... (-3*pi/4)
```

## Logarithmic and Exponential Functions

### log

Returns the natural logarithm (base e).

```setsuna
log(1)         // 0.0
log(e)         // 1.0
log(10)        // 2.302...
```

### log10

Returns the base-10 logarithm.

```setsuna
log10(1)       // 0.0
log10(10)      // 1.0
log10(100)     // 2.0
```

### exp

Returns e raised to the power of x.

```setsuna
exp(0)         // 1.0
exp(1)         // 2.718... (e)
exp(2)         // 7.389...
```

## Random Numbers

### random

Returns a random floating-point number between 0 (inclusive) and 1 (exclusive).

```setsuna
random()       // 0.7234... (varies each call)
random()       // 0.1567... (varies each call)

// Generate a random number between 0 and 100
random() * 100
```

### random_int

Returns a random integer in the given range (inclusive on both ends).

```setsuna
random_int(1, 6)     // Random dice roll: 1, 2, 3, 4, 5, or 6
random_int(0, 100)   // Random number from 0 to 100
random_int(-10, 10)  // Random number from -10 to 10
```

## Common Math Patterns

### Clamping Values

```setsuna
fn clamp(value, low, high) {
    min(max(value, low), high)
}

clamp(5, 0, 10)    // 5
clamp(-5, 0, 10)   // 0
clamp(15, 0, 10)   // 10
```

### Computing Distance

```setsuna
fn distance(x1, y1, x2, y2) {
    let dx = x2 - x1
    let dy = y2 - y1
    sqrt(dx * dx + dy * dy)
}

distance(0, 0, 3, 4)  // 5.0
```

### Factorial

```setsuna
fn factorial(n) {
    match n {
        0 => 1,
        _ => n * factorial(n - 1)
    }
}

factorial(5)   // 120
factorial(10)  // 3628800
```

### Fibonacci

```setsuna
fn fib(n) {
    match n {
        0 => 0,
        1 => 1,
        _ => fib(n - 1) + fib(n - 2)
    }
}

fib(10)  // 55
```

### GCD (Greatest Common Divisor)

```setsuna
fn gcd(a, b) {
    if b == 0 {
        abs(a)
    } else {
        gcd(b, a % b)
    }
}

gcd(48, 18)   // 6
gcd(100, 35)  // 5
```

### LCM (Least Common Multiple)

```setsuna
fn lcm(a, b) {
    abs(a * b) / gcd(a, b)
}

lcm(4, 6)   // 12
lcm(3, 5)   // 15
```

### Is Prime

```setsuna
fn is_prime(n) {
    if n < 2 {
        false
    } else {
        fn check(i) {
            if i * i > n {
                true
            } else if n % i == 0 {
                false
            } else {
                check(i + 1)
            }
        }
        check(2)
    }
}

is_prime(17)  // true
is_prime(18)  // false
```

### Power (Recursive)

```setsuna
fn power(base, exp) {
    match exp {
        0 => 1,
        _ if exp < 0 => 1.0 / power(base, -exp),
        _ if exp % 2 == 0 => {
            let half = power(base, exp / 2)
            half * half
        },
        _ => base * power(base, exp - 1)
    }
}
```

## Numeric Ranges

Generate a range of numbers:

```setsuna
fn range(start, end) {
    if start >= end {
        []
    } else {
        cons(start, range(start + 1, end))
    }
}

range(1, 6)    // [1, 2, 3, 4, 5]
range(0, 3)    // [0, 1, 2]
```

### With Step

```setsuna
fn range_step(start, end, step) {
    if start >= end {
        []
    } else {
        cons(start, range_step(start + step, end, step))
    }
}

range_step(0, 10, 2)  // [0, 2, 4, 6, 8]
```

## Sum and Product

```setsuna
fn sum(lst) {
    fn helper(lst, acc) {
        match lst {
            [] => acc,
            [h, ...t] => helper(t, acc + h)
        }
    }
    helper(lst, 0)
}

fn product(lst) {
    fn helper(lst, acc) {
        match lst {
            [] => acc,
            [h, ...t] => helper(t, acc * h)
        }
    }
    helper(lst, 1)
}

sum([1, 2, 3, 4, 5])      // 15
product([1, 2, 3, 4, 5])  // 120
```

## Average

```setsuna
fn average(lst) {
    if empty(lst) {
        error("Cannot average empty list")
    } else {
        sum(lst) / len(lst)
    }
}

average([1, 2, 3, 4, 5])  // 3
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Built-in Functions" icon="toolbox" href="/reference/builtins">
    All built-in functions
  </Card>
  <Card title="Operators" icon="plus-minus" href="/reference/operators">
    Complete operator reference
  </Card>
</CardGroup>
