---
title: String Functions
description: String manipulation functions in Setsuna
---

# String Functions

Setsuna provides a comprehensive set of built-in functions for string manipulation.

## Overview

| Function | Description |
|----------|-------------|
| `len` | Get string length |
| `substr` | Extract substring |
| `split` | Split string into list |
| `join` | Join list into string |
| `uppercase` | Convert to uppercase |
| `lowercase` | Convert to lowercase |
| `trim` | Remove whitespace from both ends |
| `trim_start` | Remove leading whitespace |
| `trim_end` | Remove trailing whitespace |
| `contains` | Check if string contains substring |
| `starts_with` | Check if string starts with prefix |
| `ends_with` | Check if string ends with suffix |
| `replace` | Replace first occurrence |
| `replace_all` | Replace all occurrences |
| `char_at` | Get character at index |
| `chars` | Convert string to list of characters |
| `index_of` | Find index of substring |

## String Length

### len

Get the number of characters in a string.

```typescript
len("hello")       // 5
len("")            // 0
len("hello world") // 11
```

**Signature:** `len(string) -> Int`

## Substring Operations

### substr

Extract a substring from start index to end index (exclusive).

```typescript
substr("hello", 0, 2)    // "he"
substr("hello", 1, 4)    // "ell"
substr("hello", 2, 5)    // "llo"
```

**Signature:** `substr(string, start, end) -> String`

### char_at

Get the character at a specific index.

```typescript
char_at("hello", 0)      // "h"
char_at("hello", 4)      // "o"
char_at("hello", 10)     // Error: index out of bounds
```

**Signature:** `char_at(string, index) -> String`

### chars

Convert a string to a list of single-character strings.

```typescript
chars("abc")             // ["a", "b", "c"]
chars("hello")           // ["h", "e", "l", "l", "o"]
chars("")                // []
```

**Signature:** `chars(string) -> List<String>`

## Search Functions

### contains

Check if a string contains a substring.

```typescript
contains("hello world", "world")  // true
contains("hello world", "foo")    // false
contains("hello", "")             // true
```

**Signature:** `contains(string, substring) -> Bool`

### starts_with

Check if a string starts with a prefix.

```typescript
starts_with("hello", "he")        // true
starts_with("hello", "lo")        // false
starts_with("hello", "")          // true
```

**Signature:** `starts_with(string, prefix) -> Bool`

### ends_with

Check if a string ends with a suffix.

```typescript
ends_with("hello", "lo")          // true
ends_with("hello", "he")          // false
ends_with("hello", "")            // true
```

**Signature:** `ends_with(string, suffix) -> Bool`

### index_of

Find the index of the first occurrence of a substring. Returns -1 if not found.

```typescript
index_of("hello", "l")            // 2
index_of("hello", "lo")           // 3
index_of("hello", "x")            // -1
```

**Signature:** `index_of(string, substring) -> Int`

## Case Conversion

### uppercase

Convert a string to uppercase.

```typescript
uppercase("hello")       // "HELLO"
uppercase("Hello World") // "HELLO WORLD"
uppercase("123abc")      // "123ABC"
```

**Signature:** `uppercase(string) -> String`

### lowercase

Convert a string to lowercase.

```typescript
lowercase("HELLO")       // "hello"
lowercase("Hello World") // "hello world"
lowercase("123ABC")      // "123abc"
```

**Signature:** `lowercase(string) -> String`

## Whitespace Handling

### trim

Remove whitespace from both ends of a string.

```typescript
trim("  hello  ")        // "hello"
trim("\t\nhello\n\t")    // "hello"
trim("hello")            // "hello"
```

**Signature:** `trim(string) -> String`

### trim_start

Remove whitespace from the start of a string.

```typescript
trim_start("  hello  ")  // "hello  "
trim_start("\t\nhello")  // "hello"
```

**Signature:** `trim_start(string) -> String`

### trim_end

Remove whitespace from the end of a string.

```typescript
trim_end("  hello  ")    // "  hello"
trim_end("hello\n\t")    // "hello"
```

**Signature:** `trim_end(string) -> String`

## Split and Join

### split

Split a string by a delimiter into a list of strings.

```typescript
split("a,b,c", ",")              // ["a", "b", "c"]
split("hello world", " ")        // ["hello", "world"]
split("one::two::three", "::")   // ["one", "two", "three"]
split("hello", "")               // ["h", "e", "l", "l", "o"]
```

**Signature:** `split(string, delimiter) -> List<String>`

### join

Join a list of strings with a delimiter.

```typescript
join(["a", "b", "c"], ",")       // "a,b,c"
join(["hello", "world"], " ")    // "hello world"
join(["one", "two"], "")         // "onetwo"
join([], ",")                    // ""
```

**Signature:** `join(list, delimiter) -> String`

## Replace Functions

### replace

Replace the first occurrence of a pattern.

```typescript
replace("hello world", "world", "there")  // "hello there"
replace("aaa", "a", "b")                   // "baa"
replace("hello", "x", "y")                 // "hello" (no match)
```

**Signature:** `replace(string, pattern, replacement) -> String`

### replace_all

Replace all occurrences of a pattern.

```typescript
replace_all("hello world world", "world", "there")  // "hello there there"
replace_all("aaa", "a", "b")                         // "bbb"
replace_all("hello", "l", "L")                       // "heLLo"
```

**Signature:** `replace_all(string, pattern, replacement) -> String`

## String Interpolation

Use f-strings (interpolated strings) to embed expressions directly in strings:

```typescript
let name = "Alice"
let age = 30
print(f"Hello, {name}!")           // "Hello, Alice!"
print(f"{name} is {age} years old")  // "Alice is 30 years old"
```

### Syntax

Prefix a string with `f` and use `{expression}` to embed values:

```typescript
f"text {expression} more text"
```

### Expressions in Interpolation

Any valid expression can be used inside `{}`:

```typescript
let x = 10
print(f"x squared is {x * x}")     // "x squared is 100"
print(f"x + 5 = {x + 5}")          // "x + 5 = 15"

let items = [1, 2, 3]
print(f"List has {len(items)} items")  // "List has 3 items"
```

### Escaping Braces

Use `\{` to include a literal `{` in the string:

```typescript
print(f"Use \{name\} for interpolation")  // "Use {name} for interpolation"
```

### Nested Interpolation

Function calls and complex expressions work inside interpolation:

```typescript
fn greet(name) { f"Hello, {name}!" }

print(f"Message: {greet(\"World\")}")  // "Message: Hello, World!"
```

<Tip>
F-strings are generally preferred over concatenation for building strings with embedded values. They're more readable and don't require explicit `str()` conversions.
</Tip>

## String Concatenation

Use the `+` operator to concatenate strings:

```typescript
"hello" + " " + "world"    // "hello world"
"value: " + str(42)        // "value: 42"
```

<Note>
You must use `str()` to convert non-string values before concatenation. For easier string building, consider using [f-strings](#string-interpolation) instead.
</Note>

## Common Patterns

### Building Strings

```typescript
// Using f-strings (recommended)
fn format_person(name, age) {
    f"Name: {name}, Age: {age}"
}

format_person("Alice", 30)  // "Name: Alice, Age: 30"

// Using concatenation
fn format_person_concat(name, age) {
    "Name: " + name + ", Age: " + str(age)
}
```

### Parsing Input

```typescript
fn parse_csv_line(line) {
    split(line, ",")
}

parse_csv_line("Alice,30,Tokyo")  // ["Alice", "30", "Tokyo"]
```

### Validation

```typescript
fn is_valid_email(email) {
    contains(email, "@") && contains(email, ".")
}

fn is_valid_identifier(s) {
    len(s) > 0 && !starts_with(s, "0")
}
```

### String Transformation

```typescript
fn normalize(s) {
    lowercase(trim(s))
}

fn title_case(s) {
    let words = split(s, " ")
    let capitalized = map((w) => {
        if len(w) > 0 {
            uppercase(char_at(w, 0)) + lowercase(substr(w, 1, len(w)))
        } else {
            w
        }
    }, words)
    join(capitalized, " ")
}

title_case("hello world")  // "Hello World"
```

### String Repetition

```typescript
fn repeat(s, n) {
    fn helper(acc, count) {
        if count == 0 {
            acc
        } else {
            helper(acc + s, count - 1)
        }
    }
    helper("", n)
}

repeat("ab", 3)  // "ababab"
```

### Padding

```typescript
fn pad_left(s, width, char) {
    let padding = width - len(s)
    if padding <= 0 {
        s
    } else {
        repeat(char, padding) + s
    }
}

fn pad_right(s, width, char) {
    let padding = width - len(s)
    if padding <= 0 {
        s
    } else {
        s + repeat(char, padding)
    }
}

pad_left("42", 5, "0")   // "00042"
pad_right("hi", 5, " ")  // "hi   "
```

## Next Steps

<Cards>
  <Card title="Built-in Functions" href="/reference/builtins" />
  <Card title="I/O Functions" href="/reference/io" />
</Cards>
